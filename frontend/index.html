<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/icon-192.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Labnex - AI-Powered Testing Automation Platform. Streamline your testing workflow with intelligent automation, CLI tools, and Discord AI integration." />
    <meta name="keywords" content="testing automation, AI testing, CLI tools, Discord bot, test case management, software testing" />
    <meta name="author" content="Labnex Team" />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://www.labnex.dev/" />
    <meta property="og:title" content="Labnex - AI-Powered Testing Automation Platform" />
    <meta property="og:description" content="Streamline your testing workflow with intelligent automation, CLI tools, and Discord AI integration." />
    <meta property="og:image" content="https://www.labnex.dev/og-home.png" />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://www.labnex.dev/" />
    <meta property="twitter:title" content="Labnex - AI-Powered Testing Automation Platform" />
    <meta property="twitter:description" content="Streamline your testing workflow with intelligent automation, CLI tools, and Discord AI integration." />
    <meta property="twitter:image" content="https://www.labnex.dev/og-home.png" />

    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json" />
    <meta name="theme-color" content="#1e293b" />
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" href="/icon-192.svg" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="Labnex" />

    <!-- Preload critical resources -->
    <link rel="preload" href="/src/index.css" as="style" />
    <link rel="preload" href="/src/main.tsx" as="script" />
    
    <!-- DNS prefetch for external resources -->
    <link rel="dns-prefetch" href="//fonts.googleapis.com" />
    <link rel="dns-prefetch" href="//fonts.gstatic.com" />
    <link rel="dns-prefetch" href="//api.labnex.dev" />
    
    <!-- Security headers for GitHub Pages -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff" />
    <meta name="referrer" content="strict-origin-when-cross-origin" />
    <meta http-equiv="Permissions-Policy" content="geolocation=(), microphone=(), camera=(), payment=(), usb=(), magnetometer=(), gyroscope=(), accelerometer=()" />
    
    <title>Labnex - AI-Powered Testing Automation Platform</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    <script>
      // GitHub Pages SPA routing support
      // This script handles the redirect from 404.html
      (function(l) {
        if (l.search[1] === '/' ) {
          var decoded = l.search.slice(1).split('&').map(function(s) { 
            return s.replace(/~and~/g, '&')
          }).join('?');
          window.history.replaceState(null, null,
              l.pathname.slice(0, -1) + decoded + l.hash
          );
        }
      }(window.location))

      // Performance optimizations
      window.addEventListener('DOMContentLoaded', () => {
        // Lazy load images for better performance
        if ('IntersectionObserver' in window) {
          const imageObserver = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
              if (entry.isIntersecting) {
                const img = entry.target;
                img.setAttribute('loading', 'lazy');
                observer.unobserve(img);
              }
            });
          });
          
          document.querySelectorAll('img:not([loading])').forEach(img => {
            imageObserver.observe(img);
          });
        } else {
          // Fallback for older browsers
          document.querySelectorAll('img:not([loading])').forEach(img => img.setAttribute('loading', 'lazy'));
        }
        
        // Preload critical CSS
        const criticalCSS = document.createElement('link');
        criticalCSS.rel = 'preload';
        criticalCSS.as = 'style';
        criticalCSS.href = '/src/index.css';
        document.head.appendChild(criticalCSS);
      });

      // Enhanced Cloudflare deprecation warning handler for GitHub Pages
      (function() {
        // Override console.error to filter out known Cloudflare deprecation warnings
        const originalConsoleError = console.error;
        console.error = function(...args) {
          const message = args.join(' ');
          
          // Filter out known Cloudflare deprecation warnings
          if (message.includes('StorageType.persistent is deprecated')) {
            // Don't log this as an error - it's from Cloudflare's CDN, not our code
            console.warn('Cloudflare deprecation warning suppressed - this is from CDN and not our application code');
            return;
          }
          
          // Filter out GitHub Pages specific warnings
          if (message.includes('Failed to load resource') && 
              (message.includes('cdn-cgi') || message.includes('challenge-platform'))) {
            console.warn('GitHub Pages CDN warning suppressed');
            return;
          }
          
          // Log other errors normally
          originalConsoleError.apply(console, args);
        };

        // Override console.warn to filter GitHub Pages warnings
        const originalConsoleWarn = console.warn;
        console.warn = function(...args) {
          const message = args.join(' ');
          
          // Filter out known GitHub Pages warnings
          if (message.includes('StorageType.persistent is deprecated') ||
              message.includes('Failed to load resource') ||
              message.includes('Mixed Content')) {
            return; // Suppress these warnings
          }
          
          originalConsoleWarn.apply(console, args);
        };

        // Use modern storage API if available
        if (typeof navigator !== 'undefined' && navigator.storage) {
          // Modern storage API is available
          console.log('Using modern navigator.storage API');
        }
      })();
    </script>
  </body>
</html>
