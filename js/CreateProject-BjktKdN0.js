import{j as e}from"./markdown-core-J3SG-zFE.js";import{r as t,u as r}from"./router-W3ruk9z3.js";import{b as s,c as a}from"./query-DQpHUI-d.js";import{c as o}from"./projects-C7_LdZWl.js";import{a as i}from"./api-axios-ztdpVPaQ.js";import"./react-core-eVk5PToZ.js";import"../assets/index-DzQGG0sq.js";import"./markdown-syntax-D_e3LpQv.js";import"./animations-framer-BqiiQv6P.js";import"./other-heavy-BrS_fVLY.js";import"./forms-hook-uaZDsLJv.js";import"./forms-resolvers-o9eYnsGV.js";import"./forms-zod-BHhVsmmU.js";function n(){const[n,m]=t.useState(""),[c,l]=t.useState(""),[d,p]=t.useState(""),[u,j]=t.useState(""),x=r(),h=s(),{mutate:b,isPending:f}=a({mutationFn:o,onSuccess:()=>{h.invalidateQueries({queryKey:["projects"]}),x("/")},onError:e=>{let t="Failed to create project";i.isAxiosError(e)&&e.response?.data?.message?t=e.response.data.message:e.message&&(t=e.message),j(t)}});return e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsx("h1",{className:"text-2xl font-bold text-white mb-6",children:"Create New Project"}),e.jsxs("form",{onSubmit:e=>{if(e.preventDefault(),j(""),!n.trim())return void j("Project name is required");if(!d.trim())return void j("Project code is required");if(!/^[a-zA-Z0-9]{3,5}$/.test(d.trim()))return void j("Project code must be 3-5 alphanumeric characters.");const t={name:n.trim(),projectCode:d.trim().toUpperCase(),...c.trim()&&{description:c.trim()}};b(t)},className:"space-y-6",children:[u&&e.jsx("div",{className:"bg-red-500/10 border border-red-500 text-red-500 px-4 py-3 rounded relative",role:"alert",children:e.jsx("span",{className:"block sm:inline",children:u})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-300 mb-2",children:"Project Name"}),e.jsx("input",{id:"name",type:"text",value:n,onChange:e=>m(e.target.value),className:"input w-full",placeholder:"Enter project name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"projectCode",className:"block text-sm font-medium text-gray-300 mb-2",children:"Project Code"}),e.jsx("input",{id:"projectCode",type:"text",value:d,onChange:e=>p(e.target.value),className:"input w-full",placeholder:"Enter project code (e.g., PROJ1)",required:!0,minLength:3,maxLength:5,pattern:"^[a-zA-Z0-9]{3,5}$"}),e.jsx("p",{className:"mt-1 text-xs text-gray-400",children:"3-5 alphanumeric characters. This cannot be changed later."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-300 mb-2",children:"Description (Optional)"}),e.jsx("textarea",{id:"description",value:c,onChange:e=>l(e.target.value),className:"input w-full h-32 resize-none",placeholder:"Enter project description"})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>x("/"),className:"btn btn-secondary",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:f,children:f?"Creating...":"Create Project"})]})]})]})}export{n as CreateProject};
