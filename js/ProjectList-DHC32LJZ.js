import{j as e}from"./markdown-core-J3SG-zFE.js";import{u as s,r as t,L as a}from"./router-W3ruk9z3.js";import{b as r}from"./query-DQpHUI-d.js";import{u as o,S as l,F as i}from"./Filter-BWht7uWJ.js";import{L as n}from"../assets/index-DzQGG0sq.js";import{E as c}from"./ErrorMessage-Bz_uBxpF.js";import"./react-core-eVk5PToZ.js";import"./projects-C7_LdZWl.js";import"./markdown-syntax-D_e3LpQv.js";import"./api-axios-ztdpVPaQ.js";import"./animations-framer-BqiiQv6P.js";import"./other-heavy-BrS_fVLY.js";import"./forms-hook-uaZDsLJv.js";import"./forms-resolvers-o9eYnsGV.js";import"./forms-zod-BHhVsmmU.js";function d({project:t}){const a=s();return e.jsxs("div",{onClick:()=>a(`/projects/${t._id}`),className:"card hover:shadow-glow-brand transition-shadow duration-300 cursor-pointer hover:-translate-y-1",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[t.name,t.projectCode&&e.jsx("span",{className:"ml-2 text-xs font-mono bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-300 px-1.5 py-0.5 rounded",children:t.projectCode})]}),!t.isActive&&e.jsx("span",{className:"px-2 py-1 text-xs font-medium text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 rounded",children:"Inactive"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4 line-clamp-2",children:t.description}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),t.testCaseCount," test cases"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),t.members.length," members"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),new Date(t.updatedAt).toLocaleDateString()]})]})]})}const m=[{value:"name",label:"Name"},{value:"createdAt",label:"Created Date"},{value:"updatedAt",label:"Last Updated"}],x=[{value:"active",label:"Active"},{value:"completed",label:"Completed"},{value:"archived",label:"Archived"}],j={sortBy:"updatedAt",sortOrder:"desc"};function p(){const s=r(),{data:p,isLoading:h,error:u,params:g,updateParams:y,setPage:v,clearSearch:b}=o({type:"projects",initialParams:j}),f=t.useCallback(e=>{y({query:e||void 0})},[y]),N=t.useCallback(e=>{y({sortBy:e})},[y]),k=t.useCallback(e=>{y({status:e||void 0})},[y]);t.useEffect(()=>()=>{b(),s.removeQueries({queryKey:["projects"]})},[b,s]);const w=t.useMemo(()=>p?.data||[],[p]),C=t.useMemo(()=>p?.totalPages||0,[p]),M=t.useMemo(()=>!!g.query||!!g.status,[g.query,g.status]),L=t.useMemo(()=>h&&!w.length?e.jsx("div",{className:"flex justify-center items-center min-h-[300px]",children:e.jsx(n,{})}):h||0!==w.length?e.jsx("div",{className:h?"opacity-60 pointer-events-none":"",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w.map(s=>e.jsx(d,{project:s},s._id))})}):e.jsx("div",{className:"text-center py-12 bg-gray-800/30 rounded-lg",children:M?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-400",children:"No projects match your search criteria"}),e.jsx("button",{onClick:()=>b(),className:"mt-2 text-blue-400 hover:text-blue-300",children:"Clear filters"})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-400 mb-4",children:"You don't have any projects yet"}),e.jsx(a,{to:"/projects/new",className:"btn btn-primary",children:"Create Your First Project"})]})}),[h,w,M,b]),A=t.useMemo(()=>C<=1?null:e.jsx("div",{className:"flex justify-center gap-2 mt-6",children:Array.from({length:C},(e,s)=>s+1).map(s=>e.jsx("button",{onClick:()=>v(s),className:"px-3 py-1 rounded transition-colors "+(s===g.page?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:s},s))}),[C,g.page,v]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Projects"}),e.jsx(a,{to:"/projects/new",className:"btn btn-primary",children:"Create Project"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[e.jsx(l,{placeholder:"Search projects...",onSearch:f}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(i,{label:"Sort by",options:m,value:g.sortBy||"updatedAt",onChange:N}),e.jsx(i,{label:"Status",options:x,value:g.status||"",onChange:k})]})]}),u&&e.jsxs("div",{className:"my-4",children:[e.jsx(c,{message:"Failed to load projects. Please try again."}),e.jsx("button",{onClick:()=>s.invalidateQueries({queryKey:["projects"]}),className:"mt-2 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Retry"})]}),L,A]})}export{p as ProjectList};
