import{j as e}from"./markdown-core-J3SG-zFE.js";import{c as r,u as t,r as s}from"./router-W3ruk9z3.js";import{b as a,u as o,c as i}from"./query-DQpHUI-d.js";import{u as n,a as d}from"./projects-C7_LdZWl.js";import{L as c}from"../assets/index-DzQGG0sq.js";import"./react-core-eVk5PToZ.js";import"./markdown-syntax-D_e3LpQv.js";import"./api-axios-ztdpVPaQ.js";import"./animations-framer-BqiiQv6P.js";import"./other-heavy-BrS_fVLY.js";import"./forms-hook-uaZDsLJv.js";import"./forms-resolvers-o9eYnsGV.js";import"./forms-zod-BHhVsmmU.js";function m(){const{id:m}=r(),l=t(),p=a(),[j,u]=s.useState(""),[x,f]=s.useState(""),[h,b]=s.useState(""),{data:y,isLoading:v}=o({queryKey:["project",m],queryFn:()=>m&&"undefined"!==m?d(m):Promise.reject(new Error("Invalid project ID")),enabled:!!m&&"undefined"!==m}),{mutate:N,isPending:g}=i({mutationFn:e=>m&&"undefined"!==m?n(m,e):Promise.reject(new Error("Invalid project ID for update")),onSuccess:()=>{p.invalidateQueries({queryKey:["projects"]}),p.invalidateQueries({queryKey:["project",m]}),l(m&&"undefined"!==m?`/projects/${m}`:"/dashboard")},onError:()=>{b("Failed to update project")}});s.useEffect(()=>{y&&(u(y.name),f(y.description))},[y]);return v?e.jsx(c,{}):e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsx("h1",{className:"text-2xl font-bold text-white mb-6",children:"Edit Project"}),e.jsxs("form",{onSubmit:e=>{e.preventDefault(),b(""),j.trim()?y&&y.projectCode?N({name:j,description:x,projectCode:y.projectCode}):b("Project data is incomplete, cannot update."):b("Project name is required")},className:"space-y-6",children:[h&&e.jsx("div",{className:"bg-red-500/10 border border-red-500 text-red-500 px-4 py-3 rounded relative",role:"alert",children:e.jsx("span",{className:"block sm:inline",children:h})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-300 mb-2",children:"Project Name"}),e.jsx("input",{id:"name",type:"text",value:j,onChange:e=>u(e.target.value),className:"input w-full",placeholder:"Enter project name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-300 mb-2",children:"Description"}),e.jsx("textarea",{id:"description",value:x,onChange:e=>f(e.target.value),className:"input w-full h-32 resize-none",placeholder:"Enter project description"})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>{l(m&&"undefined"!==m?`/projects/${m}`:"/dashboard")},className:"btn btn-secondary",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:g,children:g?"Saving...":"Save Changes"})]})]})]})}export{m as EditProject};
